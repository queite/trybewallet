(this.webpackJsonptrybewallet=this.webpackJsonptrybewallet||[]).push([[0],{33:function(e,t,a){e.exports=a(53)},38:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(19),c=a.n(l),i=a(21),o=(a(38),a(7)),s=a(2),u=a(16),d=a(9),p=a(10),m=a(12),h=a(11),E=a(3),v=a(14),b=a.n(v),f=a(18),g=function(){var e=Object(f.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://economia.awesomeapi.com.br/json/all");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(e){return{type:"GET_CURRENCIES",currencies:e}},y=function(e){return{type:"SAVE_EXPENSE",expense:e}},O=function(e){return{type:"UPDATE_TOTAL",total:e}},j=function(e){return{type:"DELETE",expenses:e}},w=function(e){return{type:"EDITING",id:e}};a(46);var T=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).handleInput=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(u.a)({},n,r),e.loginValidation)},e.loginValidation=function(){var t=e.state,a=t.email,n=t.password;/^[a-z0-9]+@[a-z0-9]+\.[a-z]+/i.test(a)&&n.length>=6?e.setState({isDisabled:!1}):e.setState({isDisabled:!0})},e.handleLogin=function(){var t=e.props,a=t.history;(0,t.sendLogin)(e.state.email),a.push("/carteira")},e.state={isDisabled:!0,email:"",password:""},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.isDisabled;return r.a.createElement("section",{className:"login-container"},r.a.createElement("label",{htmlFor:"email"},"E-mail:",r.a.createElement("input",{"data-testid":"email-input",type:"text",name:"email",onChange:this.handleInput,value:t,id:"email"})),r.a.createElement("label",{htmlFor:"password"},"Senha:",r.a.createElement("input",{"data-testid":"password-input",type:"password",name:"password",onChange:this.handleInput,value:a,id:"password"})),r.a.createElement("button",{disabled:n,type:"button",onClick:this.handleLogin},"Entrar"))}}]),a}(r.a.Component),C=Object(o.b)(null,(function(e){return{sendLogin:function(t){return e({type:"LOGIN",email:t})}}}))(T),k=(a(47),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleTotal=function(){var t=e.props,a=t.expenses,n=t.dispatch,r=a.reduce((function(e,t){return e+=t.value*t.exchangeRates[t.currency].ask}),0);n(O(r.toFixed(2)))},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.handleTotal()}},{key:"componentDidUpdate",value:function(e){var t=this.props.expenses;e.expenses!==t&&this.handleTotal()}},{key:"render",value:function(){var e=this.props,t=e.userEmail,a=e.total;return r.a.createElement("header",null,r.a.createElement("h1",null,"TRYBE",r.a.createElement("strong",null,"WALLET")),r.a.createElement("section",null,r.a.createElement("p",{"data-testid":"email-field"},t),r.a.createElement("div",{className:"total-container"},r.a.createElement("p",{"data-testid":"total-field"},a||0),r.a.createElement("p",{"data-testid":"header-currency-field"},"BRL"))))}}]),a}(n.Component)),D=Object(o.b)((function(e){return{userEmail:e.user.email,expenses:e.wallet.expenses,total:e.wallet.total}}))(k),I=(a(48),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).handleInput=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(u.a)({},n,r))},e.handleExpense=function(){var t;(0,e.props.dispatch)((t=e.state,function(){var e=Object(f.a)(b.a.mark((function e(a,n){var r,l,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n(),e.next=4,g();case 4:l=e.sent,c=Object(E.a)(Object(E.a)({},t),{},{exchangeRates:l,id:r.wallet.expenses.length}),a(y(c)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}())),e.setState({value:"",description:"",currency:"",method:"",tag:""})},e.handleEdit=function(){var t=e.props,a=t.dispatch,n=t.idToEdit,r=t.expenses.filter((function(e){return e.id===n})),l=e.state,c={value:l.value,description:l.description,currency:l.currency,method:l.method,tag:l.tag,id:n,exchangeRates:r[0].exchangeRates};a({type:"EDIT",expense:c}),a(w()),e.setState({value:"",description:"",currency:"",method:"",tag:""})},e.state={value:"",description:"",currency:"",method:"",tag:""},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.currencies,a=e.isEditingStatus,n=this.state,l=n.value,c=n.description,i=n.currency,o=n.method,s=n.tag;return r.a.createElement("form",{className:"form-container"},r.a.createElement("label",{htmlFor:"value"},"Valor",r.a.createElement("input",{"data-testid":"value-input",type:"text",id:"value",name:"value",value:l,onChange:this.handleInput})),r.a.createElement("label",{htmlFor:"description"},"Descri\xe7\xe3o",r.a.createElement("input",{"data-testid":"description-input",type:"text",id:"description",name:"description",value:c,onChange:this.handleInput})),r.a.createElement("label",{htmlFor:"currencyExpense"},"Moeda",r.a.createElement("select",{id:"currencyExpense",name:"currency",value:i,onChange:this.handleInput,"data-testid":"currency-input"},t.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)})))),r.a.createElement("label",{htmlFor:"payment"},"Forma de pagamento",r.a.createElement("select",{"data-testid":"method-input",id:"payment",name:"method",value:o,onChange:this.handleInput},r.a.createElement("option",{value:""},"Selecione"),r.a.createElement("option",{value:"Dinheiro"},"Dinheiro"),r.a.createElement("option",{value:"Cart\xe3o de cr\xe9dito"},"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",{value:"Cart\xe3o de d\xe9bito"},"Cart\xe3o de d\xe9bito"))),r.a.createElement("label",{htmlFor:"tag"},"Categoria",r.a.createElement("select",{"data-testid":"tag-input",id:"tag",name:"tag",value:s,onChange:this.handleInput},r.a.createElement("option",{value:""},"Selecione"),r.a.createElement("option",{value:"Alimenta\xe7\xe3o"},"Alimenta\xe7\xe3o"),r.a.createElement("option",{value:"Lazer"},"Lazer"),r.a.createElement("option",{value:"Trabalho"},"Trabalho"),r.a.createElement("option",{value:"Transporte"},"Transporte"),r.a.createElement("option",{value:"Sa\xfade"},"Sa\xfade"))),r.a.createElement("button",{type:"button",onClick:a?this.handleEdit:this.handleExpense},a?"Editar despesa":"Adicionar despesa"))}}]),a}(n.Component)),S=Object(o.b)((function(e){return{currencies:e.wallet.currencies,expenses:e.wallet.expenses,idToEdit:e.wallet.idToEdit,isEditingStatus:e.wallet.isEditing}}))(I);I.defaultProps={idToEdit:0};var N=a(25),L=(a(49),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleDelete=function(t){var a=e.props,n=a.expenses,r=a.dispatch,l=n.filter((function(e){return e.id!==t}));r(j(l))},e.handleEdit=function(t){(0,e.props.dispatch)(w(t))},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props.expenses;return r.a.createElement("section",{className:"table"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",{className:"top"},r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir"))),r.a.createElement("tbody",null,t.map((function(t){var a=t.id,n=t.description,l=t.tag,c=t.method,i=t.value,o=t.currency,s=t.exchangeRates,u=(i*s[o].ask).toFixed(2),d=s[o].name.split("/"),p=Number(s[o].ask).toFixed(2);return r.a.createElement("tr",{key:a},r.a.createElement("td",null,n),r.a.createElement("td",null,l),r.a.createElement("td",null,c),r.a.createElement("td",null,Number(i).toFixed(2)),r.a.createElement("td",null,d[0]),r.a.createElement("td",null,p),r.a.createElement("td",null,u),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement(N.b,{"data-testid":"edit-btn",onClick:function(){return e.handleEdit(a)}}),r.a.createElement(N.a,{"data-testid":"delete-btn",type:"button",onClick:function(){return e.handleDelete(a)}})))})))))}}]),a}(n.Component)),F=Object(o.b)((function(e){return{expenses:e.wallet.expenses,isEditing:e.wallet.isEditing}}))(L),R=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.getCurrencies)()}},{key:"render",value:function(){var e=this.props.expenses;return r.a.createElement(r.a.Fragment,null,r.a.createElement(D,null),r.a.createElement(S,null),e.length?r.a.createElement(F,null):r.a.createElement("p",null,"Insira suas despesas no formul\xe1rio"))}}]),a}(r.a.Component),A=Object(o.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{getCurrencies:function(){return e(function(){var e=Object(f.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g();case 3:a=e.sent,t(x(a)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())}}}))(R);var M=function(){return r.a.createElement("div",null,r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/carteira",component:A}),r.a.createElement(s.a,{exact:!0,path:"/",component:C})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var V=a(13),z=a(30),G=a(31),U={email:""},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(E.a)(Object(E.a)({},e),{},{email:t.email});default:return e}},P=a(32),B={currencies:[],expenses:[],total:0,isEditing:!1},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CURRENCIES":return Object(E.a)(Object(E.a)({},e),{},{currencies:Object.keys(t.currencies).filter((function(e){return"USDT"!==e}))});case"SAVE_EXPENSE":return Object(E.a)(Object(E.a)({},e),{},{expenses:[].concat(Object(P.a)(e.expenses),[t.expense])});case"UPDATE_TOTAL":return Object(E.a)(Object(E.a)({},e),{},{total:Number.parseFloat(t.total)});case"DELETE":return Object(E.a)(Object(E.a)({},e),{},{expenses:t.expenses});case"EDITING":return Object(E.a)(Object(E.a)({},e),{},{isEditing:!e.isEditing,idToEdit:t.id});case"EDIT":return Object(E.a)(Object(E.a)({},e),{},{expenses:e.expenses.map((function(e){return e.id===t.expense.id?t.expense:e}))});default:return e}},J=Object(V.combineReducers)({user:_,wallet:W}),X=Object(V.createStore)(J,Object(z.composeWithDevTools)(Object(V.applyMiddleware)(G.a)));c.a.render(r.a.createElement(o.a,{store:X},r.a.createElement(i.a,null,r.a.createElement(M,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.1c766b19.chunk.js.map